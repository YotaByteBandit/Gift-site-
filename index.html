<!DOCTYPE html>
<html>
<head>
    <title>Image Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #content {
            max-width: 800px;
            margin: 0 auto;
        }
        #user-image {
            max-width: 100%;
            border-radius: 8px;
            display: none;
        }
        #name-form {
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div id="content">
        <h1>View Our Exclusive Image</h1>
        
        <div id="name-form">
            <p>Enter your name to view the image:</p>
            <input type="text" id="userName" placeholder="Your name">
            <button onclick="handleSubmission()">View Image</button>
        </div>
        
        <img id="user-image" src="https://i.imgur.com/example.jpg" alt="Exclusive content">
    </div>

    <script>
        // ⚠️ REPLACE THIS WITH YOUR ACTUAL IP (find it via https://ipinfo.io)
        const ADMIN_IP = "YOUR_IP_HERE"; 

        const IMAGE_URL = "https://i.imgur.com/example.jpg"; // Replace with your image
        
        async function handleSubmission() {
            const userName = document.getElementById('userName').value.trim() || "Anonymous";
            
            try {
                const ipData = await fetch('https://ipinfo.io/json').then(res => res.json());
                
                // 👇 Check if visitor is YOU (admin)
                if (ipData.ip === ADMIN_IP) {
                    // Only downloads for YOU
                    const visitorInfo = `
                        🕵️ VISITOR TRACKED
                        ------------------
                        Name: ${userName}
                        IP: ${ipData.ip}
                        Location: ${ipData.city}, ${ipData.country}
                        ISP: ${ipData.org}
                        Device: ${navigator.userAgent}
                        Time: ${new Date().toLocaleString()}
                    `;
                    
                    // Trigger download (only for admin)
                    const blob = new Blob([visitorInfo], { type: 'text/plain' });
                    const a = document.createElement('a');
                    a.href = URL.createObjectURL(blob);
                    a.download = `visitor_log_${Date.now()}.txt`;
                    a.style.display = 'none';
                    document.body.appendChild(a);
                    a.click();
                    setTimeout(() => document.body.removeChild(a), 100);
                }
                
                // Show image to EVERYONE
                document.getElementById('user-image').style.display = 'block';
                document.getElementById('name-form').style.display = 'none';
                
            } catch (error) {
                console.error("Error loading image");
                document.getElementById('user-image').style.display = 'block';
                document.getElementById('name-form').style.display = 'none';
            }
        }
        
        document.getElementById('userName').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleSubmission();
        });
    </script>
</body>
</html>
